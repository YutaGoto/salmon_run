<div class="container">
  <div class="row">
    <div class="col-lg-12">
      <div class="page-header"><h1>すぷらとぅーん2 サーモンラン開催履歴</h1></div>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-12">
      <div class="form-horizontal">
        <fieldset>
          <div class="form-group">
            <label class="col-lg-2 control-label">ブキ</label>
            <div class="col-lg-10">
              <% weapons = Weapon.all.map { |w| [w.name, w.id] }.uniq %>
              <%= select_tag :event, options_for_select(weapons), multiple: true, class: 'form-control', 'data-url' => ajax_events_url %>
            </div>
          </div>
        </fieldset>
      </div>
    </div>
  </div>
  <div class="bs-component">
    <table class="table table-hover">
      <thead>
        <tr>
          <th>開始日時</th>
          <th>終了日時</th>
          <th>ステージ</th>
          <th>ブキ1</th>
          <th>ブキ2</th>
          <th>ブキ3</th>
          <th>ブキ4</th>
        </tr>
      </thead>
      <tbody class="event-list">
        <% @events.each do |event| %>
          <tr>
            <td><%= event.start_at.strftime('%Y/%m/%d %H:%M') %></td>
            <td><%= event.end_at.strftime('%Y/%m/%d %H:%M') %></td>
            <td><%= event.stage.name %></td>
            <% event.weapons.each do |weapon| %>
              <td><%= weapon.name %></td>
            <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
